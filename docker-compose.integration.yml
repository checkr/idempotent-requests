version: '3'

services:
  idempotent-request-server:
    build:
      context: .
      dockerfile: Dockerfile
    environment:
      MONGODB_URI: "mongodb://root:password123@mongodb-sharded:27017"
    ports:
      - "8080:8080"
    restart: always

  integration-test:
    build:
      context: .
      dockerfile: ./test/Dockerfile
    environment:
      IDEMPOTENT_REQUESTS_HOST: "http://idempotent-request-server:8080"